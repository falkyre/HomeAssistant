build_ci:
  automation:
    - alias: System Travis Build Status
      trigger:
        - platform: state
          entity_id: sensor.travis_build_status
          from: "started"
          to: "failed"
      action:
        - service: notify.join
          data_template:
            message: >
              Travis build failed! {{ "\uD83E\uDD2C" }} https://travis-ci.org/falkyre/HomeAssistant
            data: {"icon":"https://goo.gl/xeetdy"}
              

    - alias: System Travis Build Passed
      trigger:
        - platform: state
          entity_id: sensor.travis_build_status
          from: "started"
          to: "passed"
      action:
        - service: notify.join
          data_template:
            message: >
              Travis build passed! {{ "\uD83D\uDC4D" }} https://travis-ci.org/falkyre/HomeAssistant
            data: {"icon":"https://goo.gl/xeetdy"}
              
        #- service: hassio.addon_start
        #  data:
        #    addon: core_git_pull

  sensor:
    - platform: rest
      resource: hhttps://travis-ci.org/falkyre/HomeAssistant/builds
      headers:
        Accept: application/vnd.travis-ci.2+json
      value_template: "{{ value_json.builds[0].state }}"
      name: "Travis Build Status"
    # - platform: travisci
    #   api_key:
